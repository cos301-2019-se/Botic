<div class="">
  <div class="">
    <div *ngIf="!stateDone(); else doneChatting">
      <div *ngIf="sendTicket(); else elseBlock">

        <h4>Contact Customer Representative</h4>
        <div class="container">
          <div class="row">
          <div class="col-md-12">
            <form #f="ngForm" (ngSubmit)="onSubmit(f)">
              <div class="row">
                <div class="form-group col-md-6">
                  <label for="email">Email Address</label>
                  <input class="form-control" name="email" placeholder="Email Address" type="email" id="email"  ngModel required #email="ngModel"/>
                </div>
              </div>
              <div class="row">
                <div class="form-group col-md-6">
                  <label for="subject">Subject</label>
                  <input class="form-control" name="subject" placeholder="Email Address" type="text" id="subject" ngModel required #subject="ngModel"/>
                </div>
              </div>
              <div class="row">
                <div class="form-group col-md-6">
                  <textarea
                  contenteditable="true" 
                  name="body"
                  type="text" 
                  id="body"            
                  class="form-control"
                  style="width:100%"
                  placeholder="Plese briefly describe your query and a customer representative will respond to you as soon as possible."
                  ngModel required #body="ngModel"></textarea>
                </div>                
              </div>
              <div class="row">
                  <input type="submit" class="btn btn-primary" />
                </div>
            </form>
          </div>
        </div>
        </div>                
      </div>
      <ng-template #elseBlock>
        <div style="height:40vh;border:none;">
              </div>

              <p [innerHTML] = "preview | safe: 'html'"> </p>
              <p id="preview"><span [innerHTML]=""></span></p>
              <textarea
                contenteditable="true"
                rows="4"
                cols="48"
                [(ngModel)]="userInput"
                id="btn-input" class="form-control input-sm"
                placeholder="Send ticket query here."
                >
              </textarea>
              <br>
              <div style="margin-top: 5px;">
                <div style="">
                  <button class="btn primary" (click)="onClickCall(userInput)" id="btnSend">Send</button>
                </div>
                <br>
              </div>
      </ng-template>
    </div>
    <ng-template #doneChatting>
      <div class="row">
        <div class="col-md-2">
        </div>
        <div class="col-md-8">
          <div class="alert alert-success" role="alert">
              <h4>Done!</h4>
              <p>Your request has been sent an a representative will respond to your query at our earliest convinience.Feel free to leave this page or click 'Return' to return to the home page.</p>
              <p><a href="/"><button class="btn btn-success">Return</button></a></p>
          </div>
        </div>
      </div>
    </ng-template>
  </div>
</div>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
